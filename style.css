/**
 * å°ˆæ¡ˆè¨ˆç•«ç®¡ç†å¹³å° v2.1.5
 * æ¨£å¼è¡¨ - å®Œæ•´æ•´åˆç„¡æç‰ˆ
 */

/* ============================================
   åƒåœ¾æ¡¶èˆ‡äº’å‹• ICON ç‰¹æ•ˆ
   ============================================ */
.fa-trash-can {
    transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), color 0.2s;
    cursor: pointer;
}
.fa-trash-can:hover {
    color: #f43f5e !important;
    transform: scale(1.25);
}

/* ============================================
   å‚™è¨»å€å¡Šä¼¸ç¸®
   ============================================ */
textarea {
    transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s;
    min-height: 2.5rem;
}
textarea:focus {
    height: 6.5rem !important;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
    border-color: #6366f1 !important;
}

/* ============================================
   æ’åºæŒ‰éˆ•æ‡¸åœé¡¯ç¾
   ============================================ */
.move-btn-group {
    opacity: 0.2;
    transition: opacity 0.2s;
}
.draggable-item:hover .move-btn-group {
    opacity: 1 !important;
}

/* ============================================
   Deadline è­¦å‘Šæ•ˆæœ - ç‚¸å½ˆå¼•ç·šé¢¨æ ¼
   ============================================ */
/* é«˜é¢¨éšªï¼šå¼•ç·šç‡ƒç‡’æ•ˆæœ */
.deadline-burning {
    position: relative;
}

.deadline-burning::before {
    content: '';
    position: absolute;
    top: 50%;
    right: 100%;
    width: 30px;
    height: 2px;
    background: linear-gradient(90deg, #333, #f97316, #ef4444);
    transform: translateY(-50%) rotate(-45deg);
    transform-origin: right center;
    animation: fuse-burn 0.8s ease-in-out infinite;
}

.deadline-burning::after {
    content: 'ğŸ’¥';
    position: absolute;
    top: -8px;
    right: calc(100% + 25px);
    font-size: 10px;
    animation: spark-flicker 0.3s ease-in-out infinite alternate;
    filter: drop-shadow(0 0 3px #ff6b00);
}

@keyframes fuse-burn {
    0%, 100% {
        background: linear-gradient(90deg, #555, #f97316, #fbbf24);
        box-shadow: 0 0 8px 2px rgba(251, 146, 60, 0.8);
    }
    50% {
        background: linear-gradient(90deg, #333, #ef4444, #ff6b6b);
        box-shadow: 0 0 12px 4px rgba(239, 68, 68, 0.9);
    }
}

@keyframes spark-flicker {
    0% {
        opacity: 0.6;
        transform: scale(0.8) rotate(-10deg);
    }
    100% {
        opacity: 1;
        transform: scale(1.2) rotate(10deg);
    }
}

/* ä¸­é¢¨éšªï¼šæ©˜è‰²é–ƒçˆæ•ˆæœ */
.deadline-warning {
    animation: warning-pulse 1.2s ease-in-out infinite;
    box-shadow: 0 0 8px 2px rgba(251, 146, 60, 0.5) !important;
}

@keyframes warning-pulse {
    0%, 100% {
        box-shadow: 0 0 5px 1px rgba(251, 146, 60, 0.3);
    }
    50% {
        box-shadow: 0 0 12px 4px rgba(251, 146, 60, 0.7);
    }
}

/* ç«ç„°åœ–ç¤ºå‹•ç•« - å¼•ç·šç«èŠ± */
.flame-icon {
    animation: flame-flicker 0.2s ease-in-out infinite alternate;
    filter: drop-shadow(0 0 4px #ff6b00) drop-shadow(0 0 8px #ef4444);
}

/* ============================================
   CSS è®Šæ•¸å®šç¾©
   ============================================ */
:root {
    --font-main: 'Inter', 'Helvetica Neue', Helvetica, Arial, 'Microsoft JhengHei', sans-serif;
        --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --gradient-success: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);

        /* Enhanced Glassmorphism */
        --glass-bg: rgba(255, 255, 255, 0.65);
        --glass-border: rgba(255, 255, 255, 0.4);
        --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        --glass-blur: blur(12px);

        /* Forest Theme Tweaks */
        --glass-bg-forest: rgba(255, 255, 255, 0.92);
        /* Slightly more opaque for readability */

        /* Forest Theme Colors */
        --forest-primary: #2d6a4f;
        --forest-secondary: #40916c;
        --forest-accent: #95d5b2;
        --forest-text: #1b4332;
        --forest-border: rgba(45, 106, 79, 0.3);

        /* Sakura Theme Colors - Enhanced for V2.0 */
        --sakura-primary: #ff85a1;
        --sakura-secondary: #fbb1bd;
        --sakura-accent: #ff0a54;
        --sakura-gradient: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        --sakura-text: #5d4037;
        --sakura-bg-soft: #fff1f3;
        --sakura-border: rgba(255, 133, 161, 0.3);
}

/* ============================================
   åŸºç¤æ¨£å¼
   ============================================ */
[v-cloak] {
    display: none !important;
}

html {
    font-family: var(--font-main);
    font-size: 16px;
}

body {
    line-height: 1.6;
    overflow-y: scroll;
}

/* ============================================
   éæ¸¡èˆ‡å‹•ç•«æ•ˆæœ
   ============================================ */
.transition-theme {
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

.hover-lift {
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease-out;
}

.hover-lift:hover {
    transform: translateY(-6px) scale(1.02);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(99, 102, 241, 0.1);
}

.hover-lift:active {
    transform: translateY(-2px) scale(0.99);
    box-shadow: 0 10px 25px -8px rgba(0, 0, 0, 0.15);
}

/* æŒ‰éˆ•é€šç”¨äº’å‹•æ•ˆæœ */
button, .btn-ripple {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

button:active:not(:disabled), .btn-ripple:active {
    transform: scale(0.97);
}

/* å¡ç‰‡é€²å…¥å‹•ç•« */
.card-enter {
    animation: card-slide-up 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes card-slide-up {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.diamond {
    transform: rotate(45deg);
}

    /* ============================================
   ç»ç’ƒæ“¬æ…‹æ•ˆæœ (Glassmorphism)
   ============================================ */
    .glass {
        background: var(--glass-bg);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .forest .glass {
        background: var(--glass-bg-forest);
        border-color: var(--forest-border);
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
    }

    .sakura .glass {
        background: var(--glass-bg-sakura);
        border-color: rgba(255, 126, 179, 0.2);
    }

    /* ============================================
   Logo å‘¼å¸å‹•ç•«
   ============================================ */
    @keyframes logo-pulse {

        0%,
        100% {
            box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4), 0 10px 25px -3px rgba(99, 102, 241, 0.5);
        }

        50% {
            box-shadow: 0 0 30px 5px rgba(99, 102, 241, 0.3), 0 15px 35px -5px rgba(99, 102, 241, 0.6);
        }
    }

    .logo-animated {
        animation: logo-pulse 3s ease-in-out infinite;
    }

    /* ============================================
   å¡ç‰‡æ¼¸è®Šé‚Šæ¡†
   ============================================ */
    .card-gradient-border {
        position: relative;
        background: linear-gradient(white, white) padding-box, var(--gradient-primary) border-box;
        border: 2px solid transparent;
    }

    .forest .card-gradient-border {
        background: linear-gradient(#ffffff, #ffffff) padding-box, var(--gradient-primary) border-box;
    }

    /* ============================================
   ç‹€æ…‹å‹•ç•« - å¡é—œè„ˆå‹•
   ============================================ */
    @keyframes pulse-red {
        0% {
            box-shadow: 0 0 0 0 rgba(244, 63, 94, 0.7);
        }

        70% {
            box-shadow: 0 0 0 8px rgba(244, 63, 94, 0);
        }

        100% {
            box-shadow: 0 0 0 0 rgba(244, 63, 94, 0);
        }
    }

    .status-blocked {
        animation: pulse-red 1.5s infinite;
    }

/* ============================================
   æ‹–æ›³è¦–è¦ºå¢å¼·
   ============================================ */
.draggable-item {
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

.draggable-item.dragging {
    opacity: 0.6;
    transform: scale(1.02) rotate(1deg);
    box-shadow: 0 20px 40px -10px rgba(99, 102, 241, 0.3), 0 0 0 2px rgba(99, 102, 241, 0.5);
    z-index: 100;
}

.draggable-item:not(.dragging):hover {
    border-color: rgba(99, 102, 241, 0.3);
}

.drag-handle {
    cursor: grab;
    transition: all 0.2s;
}

.drag-handle:hover {
    transform: scale(1.2);
    color: #6366f1 !important;
}

.drag-handle:active {
    cursor: grabbing;
}

    /* ============================================
   åˆ—å°æ¨£å¼
   ============================================ */
    @media print {
        .no-print {
            display: none !important;
        }

        body,
        .print-card {
            background: white !important;
            color: black !important;
            box-shadow: none !important;
            border: none !important;
        }

        /* Force all text to black in print mode to handle themes */
        .print-card * {
            color: black !important;
            background: transparent !important;
            box-shadow: none !important;
            text-shadow: none !important;
        }

        /* Keep simple borders for tables/grids */
        .print-card .border,
        .print-card .border-t,
        .print-card .border-b,
        .print-card .border-l,
        .print-card .border-r {
            border-color: #ddd !important;
        }

        .print-area {
            width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
        }
    }

    /* ============================================
   æ»¾å‹•æ¢ç¾åŒ–
   ============================================ */
    ::-webkit-scrollbar {
        height: 6px;
        width: 6px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.5), rgba(139, 92, 246, 0.5));
        border-radius: 10px;
    }

    .sakura ::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, rgba(255, 126, 179, 0.5), rgba(251, 194, 235, 0.5));
    }

    ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.8), rgba(139, 92, 246, 0.8));
    }

    /* ============================================
   Toast é€šçŸ¥å‹•ç•«
   ============================================ */
    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(30px) translateX(-50%) scale(0.9);
        }

        to {
            opacity: 1;
            transform: translateY(0) translateX(-50%) scale(1);
        }
    }

    .animate-toast {
        animation: slideUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }

    /* ============================================
   æ·¡å…¥å‹•ç•«
   ============================================ */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fade-in {
        animation: fadeIn 0.4s ease-out forwards;
    }

    /* ============================================
   ç¸®æ”¾å‹•ç•«
   ============================================ */
    @keyframes scaleUp {
        from {
            opacity: 0;
            transform: scale(0.95);
        }

        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    .animate-scale-up {
        animation: scaleUp 0.3s ease-out forwards;
    }

    /* ============================================
   é–ƒçˆé«˜äº®
   ============================================ */
    @keyframes highlight-flash {

        0%,
        100% {
            background-color: transparent;
        }

        50% {
            background-color: rgba(99, 102, 241, 0.1);
        }
    }

    .highlight-new {
        animation: highlight-flash 1s ease-in-out 2;
    }

    /* ============================================
   é€²åº¦æ¢å‹•ç•«
   ============================================ */
    @keyframes progress-shine {
        from {
            left: -150%;
        }

        to {
            left: 150%;
        }
    }

.progress-animated {
    position: relative;
    overflow: hidden;
}

.progress-animated::after {
    content: '';
    position: absolute;
    top: 0;
    left: -150%;
    width: 50%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    animation: progress-shine 2.5s ease-in-out infinite;
}

    /* ============================================
   è¼¸å…¥æ¡†ç„¦é»æ•ˆæœ
   ============================================ */
    input:focus,
    textarea:focus,
    select:focus,
    [tabindex="0"]:focus-visible {
        outline: none;
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.4);
    }

    .forest [tabindex="0"]:focus-visible {
        box-shadow: 0 0 0 3px rgba(149, 213, 178, 0.5);
    }

    .sakura [tabindex="0"]:focus-visible {
        box-shadow: 0 0 0 3px rgba(244, 114, 182, 0.5);
    }

    /* ============================================
   æŒ‰éˆ•æ³¢ç´‹æ•ˆæœ
   ============================================ */
    .btn-ripple {
        position: relative;
        overflow: hidden;
    }

    .btn-ripple::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
        transform: scale(0);
        transition: transform 0.4s ease-out;
    }

    .btn-ripple:active::after {
        transform: scale(2.5);
    }

    /* ============================================
   ä»Šæ—¥æ¨™è¨˜ç·šå‹•ç•«
   ============================================ */
    @keyframes today-pulse {

        0%,
        100% {
            opacity: 0.5;
        }

        50% {
            opacity: 1;
        }
    }

    .today-line {
        animation: today-pulse 2s ease-in-out infinite;
    }

    .sakura .today-line {
        background: linear-gradient(to b, #ff7eb3, #ff7eb3, transparent);
    }

    /* ============================================
   å¿«æ·éµæç¤ºæ¨£å¼
   ============================================ */
    .kbd {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 20px;
        height: 20px;
        padding: 0 5px;
        font-size: 11px;
        font-weight: 600;
        background: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
        border: 1px solid #cbd5e1;
        border-radius: 4px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .forest .kbd {
        background: linear-gradient(180deg, #2d6a4f 0%, #1b4332 100%);
        border-color: #40916c;
        color: #d8f3dc;
    }

    /* ============================================
   Sakura å°ˆå±¬ç´°ç¯€å„ªåŒ–
   ============================================ */
    .sakura .glass {
        background: rgba(255, 255, 255, 0.85);
        border-color: var(--sakura-border);
        box-shadow: 0 8px 32px 0 rgba(255, 182, 193, 0.2);
    }

    .sakura .btn-ripple {
        border-radius: 99px;
        /* Sakura ä¸»é¡ŒæŒ‰éˆ•æ›´åœ“æ½¤ */
    }

    /* ============================================
   æ«»èŠ±é£„è½å‹•ç•« (Falling Sakura Petals)
   ============================================ */
    .sakura-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
        display: none;
    }

    .sakura .sakura-container,
    .forest .sakura-container,
    .animal .sakura-container {
        display: block;
    }

    .petal {
        position: absolute;
        background-color: #ffb7c5;
        border-radius: 150% 0 150% 0;
        opacity: 0.7;
        z-index: 0;
        animation: fall linear infinite;
    }

    .petal::after {
        content: '';
        position: absolute;
        top: -10%;
        left: -10%;
        width: 100%;
        height: 100%;
        border-radius: 150% 0 150% 0;
        background-color: #ff91a4;
        transform: rotate(15deg);
    }

    @keyframes fall {
        0% {
            top: -10%;
            transform: translateX(0) rotate(0deg);
        }

        100% {
            top: 110%;
            transform: translateX(100px) rotate(360deg);
        }
    }

    /* ============================================
   æ‹–æ›³æ’åºæ¨£å¼ (Drag & Drop)
   ============================================ */
    .draggable-item {
        cursor: grab;
        transition: transform 0.2s, background-color 0.2s, box-shadow 0.2s;
    }

    .draggable-item.dragging {
        opacity: 0.5;
        background: rgba(99, 102, 241, 0.1);
        border: 2px dashed #6366f1;
        transform: scale(0.98);
    }

    .forest .draggable-item.dragging {
        background: rgba(149, 213, 178, 0.1);
        border-color: #40916c;
    }

    .sakura .draggable-item.dragging {
        background: rgba(255, 183, 197, 0.1);
        border-color: #ff85a1;
    }

    .drag-handle {
        cursor: grab;
        color: #cbd5e1;
        transition: color 0.2s;
        padding: 0 4px;
    }

    .drag-handle:hover {
        color: #64748b;
    }

    .forest .drag-handle:hover {
        color: #2d6a4f;
    }

    .draggable-source {
        opacity: 0.3 !important;
    }

    /* ============================================
   UI Polish - Micro-interactions & Scrollbars
   ============================================ */

    /* Custom Scrollbar */
    .custom-scroll::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    .custom-scroll::-webkit-scrollbar-track {
        background: transparent;
    }

    .custom-scroll::-webkit-scrollbar-thumb {
        background-color: rgba(156, 163, 175, 0.3);
        border-radius: 999px;
        transition: background-color 0.2s;
    }

    .custom-scroll::-webkit-scrollbar-thumb:hover {
        background-color: rgba(156, 163, 175, 0.5);
    }

    .dark .custom-scroll::-webkit-scrollbar-thumb {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .dark .custom-scroll::-webkit-scrollbar-thumb:hover {
        background-color: rgba(255, 255, 255, 0.2);
    }

    /* Hover Lift Effect */
    .hover-lift {
        transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease;
    }

    .hover-lift:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    /* Smooth Focus Ring */
    input:focus,
    select:focus,
    textarea:focus {
        transition: box-shadow 0.2s ease, border-color 0.2s ease;
    }

    /* Glass Refinements */
    .glass {
        backdrop-filter: var(--glass-blur);
        -webkit-backdrop-filter: var(--glass-blur);
        border: 1px solid var(--glass-border);
        box-shadow: var(--glass-shadow);
    }

/* ============================================
   UI/UX Enhancements (2025 Standards)
   ============================================ */

/* Z-Index Scale System - Systematic layering */
:root {
    --z-base: 1;
    --z-dropdown: 10;
    --z-sticky: 20;
    --z-fixed: 30;
    --z-modal-backdrop: 40;
    --z-modal: 50;
    --z-tooltip: 60;
    --z-toast: 99;
}

/* Cursor Pointer for Interactive Elements */
[tabindex="0"],
.draggable-item,
button:not(:disabled),
label.cursor-pointer,
.hover-lift {
    cursor: pointer;
}

/* Light Mode Glass Contrast Enhancement */
.glass {
    background: rgba(255, 255, 255, 0.85);
}

/* Particle Animation Performance */
.petal,
.particle {
    will-change: transform, opacity;
}

/* ============================================
   Accessibility: Reduced Motion Support
   ============================================ */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }

    .petal,
    .particle {
        display: none !important;
    }

    .logo-animated,
    .progress-animated,
    .today-line,
    .deadline-burning,
    .deadline-warning,
    .flame-icon,
    .status-blocked {
        animation: none !important;
    }
}

/* ============================================
   Calendar Specific Styles
   ============================================ */
.grid-cols-7 {
    display: grid;
    grid-template-columns: repeat(7, minmax(0, 1fr));
}